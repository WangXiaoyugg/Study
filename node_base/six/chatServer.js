var net = require('net');//创建TCP服务器var server = net.createServer();//允许多个用户链接var sockets = [];server.on('error',(err)=>{   console.log('Server error: ',err.message);});server.on('close',()=>{   console.log('Server closed')});//接受客户端的请求server.on('connection',(socket)=>{    console.log('Got a new connection');    sockets.push(socket);//获取从客户端发送过来的数据    socket.on('data',(data) => {        console.log('Got data: ',data.toString());        //服务器广播数据，把来自客户端的数据转发给其他的所有客户端        sockets.forEach((otherSocket)=>{            if(otherSocket !== socket){                otherSocket.write(data);            }        })    });    //最后，需要把关闭链接的客户端从服务器广播列表中删除；    socket.on('close',()=>{        console.log('A client connection closed!');        var index = sockets.indexOf(socket);        sockets.splice(index,1);    })});server.listen(8080);